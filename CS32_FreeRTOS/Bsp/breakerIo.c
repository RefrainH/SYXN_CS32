#include "bsp.h"



/*
*********************************************************************************************************
*	函 数 名: TkOn
*	功能说明: PB13-BREAK引脚输出高电平完成脱扣动作
*	形    参: 无
*	返 回 值: 无
*********************************************************************************************************
*/
void TkOn(void)
{
    gpio_bits_set(GPIOB,TK_CONTROL_PIN);	
}

/*
*********************************************************************************************************
*	函 数 名: TkOff
*	功能说明: PB13-BREAK引脚输出低电平，磁通不脱扣
*	形    参: 无
*	返 回 值: 无
*********************************************************************************************************
*/
void TkOff(void)
{
    gpio_bits_reset(GPIOB,TK_CONTROL_PIN);	
}

/*
*********************************************************************************************************
*	函 数 名: cs_start_power_on
*	功能说明: PB14引脚输出低电平，自生电源电路由硬件控制正常工作
*	形    参: 无
*	返 回 值: 无
*********************************************************************************************************
*/
void cs_start_power_on(void)
{
    gpio_bits_reset(GPIOB,POWER_CONTROL_PIN);	
}

/*
*********************************************************************************************************
*	函 数 名: cs_start_tk_off
*	功能说明: PB14引脚输出高电平，屏蔽自生电源电路
*	形    参: 无
*	返 回 值: 无
*********************************************************************************************************
*/
void cs_start_power_off(void) 
{
    gpio_bits_set(GPIOB,POWER_CONTROL_PIN);	
}

/*
*********************************************************************************************************
*	函 数 名: cs_start_gpio_read_state
*	功能说明: 读取state引脚电平 
*	形    参: 无
*	返 回 值: 0  ----  外部试跳信号有效
*             1  ----  外部试跳信号无效
*********************************************************************************************************
*/
uint8_t GetSwitchIoState(void)
{
	#if(DEV_TYPE <= DEV_TYPE_250A)
	return gpio_input_data_bit_read(GPIOB,STATE_DETECT_PIN);
	#else
	return !gpio_input_data_bit_read(GPIOB,STATE_DETECT_PIN);
	#endif 
}



/*
*********************************************************************************************************
*	函 数 名: LedRedOn
*	功能说明: 点亮-错误状态指示灯-红色。
*	形    参: 无
*	返 回 值: 无
*********************************************************************************************************
*/
void LedRedOn(void)
{
    gpio_bits_set(GPIOB,LED_RED_Error);
}

/*
*********************************************************************************************************
*	函 数 名: cs_start_led_alarm_on
*	功能说明: 点亮-告警状态指示灯-黄色。
*	形    参: 无
*	返 回 值: 无
*********************************************************************************************************
*/
void LedYellowOn(void)
{
    gpio_bits_set(GPIOB,LED_YELLOW_Alarm);
}

/*
*********************************************************************************************************
*	函 数 名: cs_start_mcu_alarm_on
*	功能说明: 点亮-mcu运行状态指示灯-绿色。
*	形    参: 无
*	返 回 值: 无
*********************************************************************************************************
*/
void LedGreenOn(void)
{
    gpio_bits_set(GPIOB,LED_GREEN_Work);
}





/*
*********************************************************************************************************
*	函 数 名: cs_start_led_error_on
*	功能说明: 熄灭-错误状态指示灯-红色。
*	形    参: 无
*	返 回 值: 无
*********************************************************************************************************
*/
void LedRedOff(void)
{
    gpio_bits_reset(GPIOB,LED_RED_Error);
}

/*
*********************************************************************************************************
*	函 数 名: cs_start_led_alarm_on
*	功能说明: 熄灭-告警状态指示灯-黄色。
*	形    参: 无
*	返 回 值: 无
*********************************************************************************************************
*/
void LedYellowOff(void)
{
    gpio_bits_reset(GPIOB,LED_YELLOW_Alarm);
}

/*
*********************************************************************************************************
*	函 数 名: cs_start_mcu_alarm_on
*	功能说明: 熄灭-mcu运行状态指示灯-绿色。
*	形    参: 无
*	返 回 值: 无
*********************************************************************************************************
*/
void LedGreenOff(void)
{
    gpio_bits_reset(GPIOB,LED_GREEN_Work);
}


/*
*********************************************************************************************************
*	函 数 名: LedYellowToggle
*	功能说明: 闪烁-告警状态指示灯-黄色。
*	形    参: 无
*	返 回 值: 无
*********************************************************************************************************
*/
void LedYellowToggle(void)
{
    GPIOB->DO ^= LED_YELLOW_Alarm;	
}

